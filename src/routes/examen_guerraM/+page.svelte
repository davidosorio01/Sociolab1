<script>
	import '$lib/CSS/examen_guerraM.css';
	let activeTab = 'video';

	let nombre = '';
	let email = '';
	let respuestas = {}; // Almacenar las respuestas del usuario
	let correctas = 0;
	let incorrectas = 0;
	let mensajeResultado = '';
	let mostrarResultado = false;

	const preguntas = [
		{
			id: 'q1',
			texto: '驴Qu茅 evento desencaden贸 la Primera Guerra Mundial en 1914?',
			opciones: {
				a: 'La firma del Tratado de Versalles',
				b: 'La invasi贸n de Polonia',
				c: 'El asesinato del archiduque Francisco Fernando',
				d: 'El bombardeo de Pearl Harbor'
			},
			correcta: 'c'
		},
		{
			id: 'q2',
			texto:
				'驴Qu茅 potencias integraban la alianza de los Aliados y las Potencias Centrales en la Primera Guerra Mundial?',
			opciones: {
				a: 'Aliados: Alemania, Jap贸n y Rusia; Potencias Centrales: Francia, Reino Unido y Estados Unidos',
				b: 'Aliados: Francia, Reino Unido, Rusia, EE.UU.; Potencias Centrales: Alemania, Austria-Hungr铆a, Imperio Otomano, Bulgaria',
				c: 'Aliados: China, EE.UU. y Jap贸n; Potencias Centrales: Alemania y Rusia',
				d: 'Aliados: Austria-Hungr铆a, Alemania y Rusia; Potencias Centrales: Francia, EE.UU. y Reino Unido'
			},
			correcta: 'b'
		},
		{
			id: 'q3',
			texto: '驴Cu谩les fueron las principales causas de la Primera Guerra Mundial?',
			opciones: {
				a: 'Nacionalismo, militarismo, imperialismo y alianzas',
				b: 'Carrera espacial, tratados comerciales, conflictos civiles y avances tecnol贸gicos',
				c: 'Expansi贸n de la Liga de Naciones, guerra fr铆a, descolonizaci贸n y competencia econ贸mica',
				d: 'Crecimiento del socialismo, colonizaci贸n de frica y acuerdos de paz'
			},
			correcta: 'a'
		},
		{
			id: 'q4',
			texto:
				'驴Qu茅 tipo de combate predomin贸 en el Frente Occidental durante la Primera Guerra Mundial?',
			opciones: {
				a: 'Guerra de guerrillas',
				b: 'Combates navales',
				c: 'Guerra de trincheras',
				d: 'Ataques a茅reos'
			},
			correcta: 'c'
		},
		{
			id: 'q5',
			texto: '驴Qu茅 tratado puso fin a la Primera Guerra Mundial y c贸mo afect贸 a Alemania?',
			opciones: {
				a: 'Tratado de Versalles; sancion贸 duramente a Alemania',
				b: 'Tratado de Paz de Par铆s; otorg贸 territorios a Alemania',
				c: 'Tratado de N煤remberg; promovi贸 la reconstrucci贸n alemana',
				d: 'Tratado de Tordesillas; dividi贸 el continente americano'
			},
			correcta: 'a'
		},
		{
			id: 'q6',
			texto:
				'驴Cu谩les fueron las consecuencias econ贸micas de la Primera Guerra Mundial para los pa铆ses europeos?',
			opciones: {
				a: 'Prosperidad y crecimiento econ贸mico en toda Europa',
				b: 'Crisis econ贸mica y devastaci贸n en muchos pa铆ses europeos',
				c: 'Incremento en los recursos disponibles y estabilidad pol铆tica',
				d: 'Aumento en la inversi贸n extranjera y reducci贸n de deudas'
			},
			correcta: 'b'
		},
		{
			id: 'q7',
			texto:
				'驴Por qu茅 el Tratado de Versalles y la humillaci贸n impuesta a Alemania se consideran causas de la Segunda Guerra Mundial?',
			opciones: {
				a: 'Porque promovieron la paz entre los pa铆ses europeos',
				b: 'Porque fortalecieron la econom铆a y las fuerzas militares de Alemania',
				c: 'Porque generaron resentimiento en Alemania, facilitando el ascenso del nazismo',
				d: 'Porque crearon buenas relaciones diplom谩ticas entre Alemania y Francia'
			},
			correcta: 'c'
		},
		{
			id: 'q8',
			texto:
				'驴Qu茅 pa铆ses formaban parte de las Potencias del Eje durante la Segunda Guerra Mundial?',
			opciones: {
				a: 'Reino Unido, Francia y Estados Unidos',
				b: 'China, Uni贸n Sovi茅tica y EE.UU.',
				c: 'Alemania, Italia y Jap贸n',
				d: 'Alemania, Rusia y Francia'
			},
			correcta: 'c'
		},
		{
			id: 'q9',
			texto: '驴Cu谩l fue el impacto de la rendici贸n de Alemania y Jap贸n en 1945?',
			opciones: {
				a: 'Inici贸 la Guerra Fr铆a',
				b: 'Puso fin a la Primera Guerra Mundial',
				c: 'Comenz贸 la Revoluci贸n Industrial',
				d: 'Estableci贸 la Liga de Naciones'
			},
			correcta: 'a'
		},
		{
			id: 'q10',
			texto:
				'驴Qu茅 organismo internacional se cre贸 tras la Segunda Guerra Mundial con el fin de mantener la paz global?',
			opciones: {
				a: 'La Liga de Naciones',
				b: 'La OTAN',
				c: 'La ONU',
				d: 'La Comunidad Europea'
			},
			correcta: 'c'
		}
	];

	function enviarExamen(event) {
		event.preventDefault();
		correctas = 0;
		incorrectas = 0;

		preguntas.forEach(({ id, correcta }) => {
			if (respuestas[id] === correcta) {
				correctas++;
			} else {
				incorrectas++;
			}
		});

		mensajeResultado = `
            Nombre: ${nombre}
            Correo: ${email}

            Correctas: ${correctas}
            Incorrectas: ${incorrectas}
        `;

		mostrarResultado = true;
	}

	function openTab(tab) {
		activeTab = tab;
	}

	import mapa from '$lib/IMAGES/img_examen_guerraM/mapa.jpg';
	import trinchera from '$lib/IMAGES/img_examen_guerraM/trinchera.jpg';
	import aliados from '$lib/IMAGES/img_examen_guerraM/Aliados.jpg';
	import batalla from '$lib/IMAGES/img_examen_guerraM/batalla.jpg';
</script>

<nav class="navbar">
	<div class="logo">
		<h4>SOCIOLAB</h4>
	</div>
	<ul class="nav-links">
		<li>
			<a href="/temas" data-sveltekit-preload-data="tap" data-sveltekit-reload class="nav-item"
				>Inicio</a
			>
		</li>
		<li><a href="/examen_guerraM" class="nav-item">Nosotros</a></li>
		<li><a href="/" class="nav-item">Contacto</a></li>
	</ul>
	<div class="burger">
		<div class="line1"></div>
		<div class="line2"></div>
		<div class="line3"></div>
	</div>
</nav>

<div class="content">
	<div class="tabs">
		<button class="tab {activeTab === 'video' ? 'active' : ''}" on:click={() => openTab('video')}>
			Video
		</button>
		<button class="tab {activeTab === 'pdf' ? 'active' : ''}" on:click={() => openTab('pdf')}>
			Informaci贸n
		</button>
		<button class="tab {activeTab === 'examen' ? 'active' : ''}" on:click={() => openTab('examen')}>
			Examen
		</button>
	</div>

	{#if activeTab === 'video'}
		<div class="tab-content active">
			<h2>VIDEO DE APOYO</h2>
			<p>Observa atentamente el video.</p>
			<iframe
				width="700"
				height="513"
				src="https://www.youtube.com/embed/nBlTdwJiXoE?si=mtsxDc0p4rfXBznu"
				title="YouTube video player"
				frameborder="0"
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
				referrerpolicy="strict-origin-when-cross-origin"
				allowfullscreen
			></iframe>
		</div>
	{/if}

	{#if activeTab === 'pdf'}
		<div class="tab-content active">
			<section id="ww1" class="war-section">
				<h2>Primera Guerra Mundial (1914-1918)</h2>
				<p>
					La Primera Guerra Mundial comenz贸 en 1914, tras el asesinato del archiduque Francisco
					Fernando de Austria en Sarajevo. Esto desat贸 tensiones entre las principales potencias
					europeas, que ya estaban inmersas en un ambiente de competencia por la expansi贸n
					imperialista, el nacionalismo y el militarismo. Los principales bandos eran los Aliados
					(Francia, Reino Unido, Rusia y m谩s tarde, Italia y EE.UU.) contra las Potencias Centrales
					(Alemania, Austria-Hungr铆a, el Imperio Otomano y Bulgaria).
				</p>
				<div class="image-placeholder">
					<img src={mapa} alt="Mapa de Europa en 1914" />
				</div>
				<h3>Causas</h3>
				<ul>
					<li>
						Asesinato de Francisco Fernando: El 28 de junio de 1914, el heredero del trono
						austroh煤ngaro fue asesinado por un nacionalista serbio, lo que llev贸 a Austria-Hungr铆a a
						declarar la guerra a Serbia. Las alianzas se activaron, escalando el conflicto.
					</li>
					<li>
						Imperialismo: Las potencias europeas compet铆an por territorios en frica y Asia, lo que
						generaba tensiones.
					</li>
					<li>
						Militarismo: La carrera armamentista entre las potencias aument贸 el riesgo de guerra.
					</li>
					<li>
						Nacionalismo: Movimientos nacionalistas en Europa, especialmente en los Balcanes,
						desestabilizaban la regi贸n.
					</li>
				</ul>
				<h3>Desarrollo</h3>
				<p>La guerra se combati贸 principalmente en tres frentes:</p>
				<ul>
					<li>
						Frente Occidental: La l铆nea de batalla entre Francia, B茅lgica y Alemania, donde
						predominaba la guerra de trincheras.
					</li>
					<li>Frente Oriental: Rusia luch贸 contra Alemania y Austria-Hungr铆a.</li>
					<li>
						Frente Italiano: Italia, que inicialmente era neutral, se uni贸 a los Aliados en 1915.
					</li>
				</ul>
				<p>
					La guerra fue larga y devastadora, con nuevas tecnolog铆as como aviones, tanques y gases
					venenosos que hicieron que los combates fueran m谩s letales. La participaci贸n de Estados
					Unidos en 1917 inclin贸 la balanza a favor de los Aliados.
				</p>
				<div class="image-placeholder">
					<img src={trinchera} alt="Trincheras en el Frente Occidental" />
				</div>
				<h3>Consecuencias</h3>
				<ul>
					<li>
						Tratado de Versalles (1919): Puso fin a la guerra y sancion贸 duramente a Alemania,
						oblig谩ndola a pagar reparaciones, perder territorios y reducir su ej茅rcito.
					</li>
					<li>
						Cambio de mapa pol铆tico: La disoluci贸n de los imperios Austroh煤ngaro, Otomano, Alem谩n y
						Ruso.
					</li>
					<li>
						Crisis econ贸mica: Muchos pa铆ses europeos quedaron devastados econ贸micamente, lo que
						sent贸 las bases para futuras tensiones.
					</li>
					<li>
						La Sociedad de Naciones: Se cre贸 para promover la paz, pero fue d茅bil y no pudo evitar
						futuros conflictos.
					</li>
				</ul>
			</section>

			<section id="ww2" class="war-section">
				<h2>Segunda Guerra Mundial (1939-1945)</h2>
				<p>
					La Segunda Guerra Mundial fue un conflicto global que involucr贸 a la mayor铆a de las
					naciones del mundo, dividi茅ndose en dos bandos principales: los Aliados (EE.UU., Reino
					Unido, la Uni贸n Sovi茅tica, China, entre otros) y las Potencias del Eje (Alemania, Italia y
					Jap贸n).
				</p>
				<div class="image-placeholder">
					<img src={aliados} alt="L铆deres de los Aliados" />
				</div>
				<h3>Causas</h3>
				<ul>
					<li>
						Tratado de Versalles: Las condiciones humillantes impuestas a Alemania tras la Primera
						Guerra Mundial generaron resentimiento, facilitando el ascenso del nazismo.
					</li>
					<li>
						Ascenso de Hitler y el nazismo: En 1933, Adolf Hitler lleg贸 al poder con un discurso
						ultranacionalista, expansionista y antisemita, buscando restaurar el poder de Alemania.
					</li>
					<li>
						Expansi贸n de las potencias del Eje: Alemania anex贸 Austria en 1938, y luego invadi贸
						Polonia en 1939, lo que desencaden贸 la guerra. Jap贸n tambi茅n estaba en una campa帽a
						expansionista en Asia.
					</li>
					<li>
						Fracaso de la Liga de las Naciones: Incapaz de prevenir agresiones internacionales como
						la invasi贸n italiana a Etiop铆a (1935) o la ocupaci贸n japonesa de Manchuria (1931).
					</li>
				</ul>
				<h3>Desarrollo</h3>
				<ul>
					<li>
						Europa: La invasi贸n alemana de Polonia en septiembre de 1939 llev贸 al Reino Unido y
						Francia a declarar la guerra a Alemania. La Blitzkrieg (guerra rel谩mpago) permiti贸 a
						Alemania conquistar r谩pidamente gran parte de Europa. Sin embargo, la invasi贸n de la
						Uni贸n Sovi茅tica (1941) y la entrada de EE.UU. en 1941 tras el ataque a Pearl Harbor
						fueron puntos clave que llevaron al declive del Eje.
					</li>
					<li>
						Asia: Jap贸n atac贸 Pearl Harbor en 1941, lo que provoc贸 la entrada de EE.UU. en la
						guerra. Jap贸n conquist贸 gran parte del sudeste asi谩tico, pero fue derrotado tras las
						batallas del Pac铆fico, como Midway y Guadalcanal.
					</li>
					<li>
						frica: Los Aliados lograron frenar el avance de las Potencias del Eje en el norte de
						frica, especialmente en la Batalla de El Alamein.
					</li>
				</ul>
				<div class="image-placeholder">
					<img src={batalla} alt="Batalla de Stalingrado" />
				</div>
				<h3>Final</h3>
				<p>
					La guerra termin贸 en Europa con la rendici贸n de Alemania el 8 de mayo de 1945, tras la
					ca铆da de Berl铆n y el suicidio de Hitler. En Asia, Jap贸n se rindi贸 el 2 de septiembre de
					1945, despu茅s de los bombardeos at贸micos de Hiroshima y Nagasaki.
				</p>
				<h3>Consecuencias</h3>
				<ul>
					<li>
						Muerte y destrucci贸n masiva: Aproximadamente 70 millones de personas murieron,
						incluyendo 6 millones de jud铆os en el Holocausto.
					</li>
					<li>
						Creaci贸n de la ONU: Las Naciones Unidas se fundaron en 1945 para promover la paz y la
						cooperaci贸n internacional.
					</li>
					<li>
						Inicio de la Guerra Fr铆a: La rivalidad entre EE.UU. y la Uni贸n Sovi茅tica se intensific贸,
						dando lugar a una nueva era de conflictos indirectos y tensiones globales.
					</li>
					<li>
						Reestructuraci贸n mundial: Europa qued贸 devastada y EE.UU. y la URSS emergieron como
						superpotencias.
					</li>
				</ul>
			</section>
		</div>
	{/if}

	{#if activeTab === 'examen'}
		<div class="tab-content active">
			{#if !mostrarResultado}
				<form on:submit={enviarExamen}>
					<label for="nombre">Nombre:</label>
					<input type="text" id="nombre" bind:value={nombre} required />

					<label for="email">Correo Electr贸nico:</label>
					<input type="email" id="email" bind:value={email} required />

					{#each preguntas as { id, texto, opciones }, index}
						<div class="question">
							<p>{index + 1}. {texto}</p>
							<div class="options">
								{#each Object.entries(opciones) as [key, value]}
									<label>
										<input
											type="radio"
											name={id}
											value={key}
											bind:group={respuestas[id]}
											required
										/>
										{value}
									</label>
								{/each}
							</div>
						</div>
					{/each}

					<button type="submit">Enviar Examen</button>
				</form>
			{:else}
				<div>
					<h2>Resultados del Examen</h2>
					<pre>{mensajeResultado}</pre>
					<button on:click={() => (mostrarResultado = false)}>Volver</button>
				</div>
			{/if}
		</div>
	{/if}
</div>

<style>
	.tab-content {
		display: none;
	}
	.tab-content.active {
		display: block;
	}
</style>
